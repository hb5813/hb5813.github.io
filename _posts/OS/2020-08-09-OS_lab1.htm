---
layout: article
title: SYSU-《操作系统原理》-实验1：引导扇区程序获取裸机控制权
tag: OS
key: OS_lab1
show_subscribe: false
license: false
---

<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=x-cp20936">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:等线;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:华文中宋;
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
@font-face
	{font-family:Georgia;
	panose-1:2 4 5 2 5 4 5 2 3 3;}
@font-face
	{font-family:"\@华文中宋";}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"\@等线";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman",serif;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	layout-grid-mode:char;
	border:none;
	padding:0cm;
	font-size:9.0pt;
	font-family:"Times New Roman",serif;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:"Times New Roman",serif;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:21.0pt;
	font-size:10.5pt;
	font-family:等线;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	layout-grid:15.6pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=ZH-CN style='text-justify-trim:punctuation'>

<div class=WordSection1 style='layout-grid:15.6pt'>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=699
 style='border-collapse:collapse'>
 <tr>
  <td width=110 valign=top style='width:82.4pt;border:none;border-bottom:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-align:justify;text-justify:distribute-all-lines;
  line-height:150%;text-autospace:none'><b><span style='font-size:22.0pt;
  line-height:150%;font-family:华文中宋'>实验一</span></b></p>
  </td>
  <td width=44 valign=top style='width:32.85pt;border:none;border-bottom:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;line-height:150%;
  text-autospace:none'><b><span style='font-size:22.0pt;line-height:150%;
  font-family:华文中宋'>：</span></b></p>
  </td>
  <td width=546 valign=top style='width:409.25pt;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left;line-height:150%;
  text-autospace:none'><b><span style='font-size:22.0pt;line-height:150%;
  font-family:华文中宋'>引导扇区程序获取裸机控制权</span></b><b><span style='font-size:22.0pt;
  line-height:150%;font-family:华文中宋'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='line-height:150%;text-autospace:none'><b><span
style='font-size:5.0pt;line-height:150%;font-family:华文中宋'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-left:0cm;text-indent:0cm;line-height:150%;
text-autospace:none'><b><span style='line-height:150%;font-family:华文中宋'>一.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></b><b><span
style='line-height:150%;font-family:华文中宋'>实验目的</span></b></p>

<p class=MsoNormal style='margin-left:4.25pt;text-indent:17.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='line-height:150%;font-family:华文中宋'>熟悉基于原型操作系统开发的实验环境</span></p>

<p class=MsoNormal style='margin-left:4.25pt;text-indent:17.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='line-height:150%;font-family:华文中宋'>掌握操作系统的嵌入式开发方法</span></p>

<p class=MsoNormal style='margin-left:4.25pt;text-indent:17.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='line-height:150%;font-family:华文中宋'>掌握IBM_PC计算机硬件系统的引导原理和磁盘引导扇区程序的设计要求</span></p>

<p class=MsoNormal style='margin-left:4.25pt;text-indent:17.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='line-height:150%;font-family:华文中宋'>复习和提高汇编语言程序程序设计能力，掌握IBM_PC以文本方式显示内存的组织方法</span></p>

<p class=MsoNormal style='margin-left:17.0pt;line-height:150%;text-autospace:
none'><span style='line-height:150%;font-family:华文中宋'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0cm;text-indent:0cm;line-height:150%;
text-autospace:none'><b><span style='line-height:150%;font-family:华文中宋'>二.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></b><b><span
style='line-height:150%;font-family:华文中宋'>实验要求</span></b></p>

<p class=MsoNormal style='text-indent:21.05pt;line-height:150%;text-autospace:
none'><span style='line-height:150%;font-family:华文中宋'>设计IBM_PC的一个引导扇区程序，程序功能是：用字符‘L’从屏幕左边某行位置45度角下斜射出，保持一个可观察的适当速度直线运动，碰到屏幕的边后产生反射，改变方向运动，如此类推，不断运动；在屏幕某个区域显示你的学号姓名等个人信息。如下图所示：</span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%;
text-autospace:none'><span lang=EN-US style='font-size:14.0pt;line-height:150%'><img
width=520 height=270 src="/assets/source/OS/2020-08-09-OS_lab1.files/image001.jpg"></span></p>

<p class=MsoNormal style='line-height:150%;text-autospace:none'><span
style='line-height:150%;font-family:华文中宋'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0cm;text-indent:0cm;line-height:150%;
text-autospace:none'><b><span style='line-height:150%;font-family:华文中宋'>三.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></b><b><span
style='line-height:150%;font-family:华文中宋'>实验方案</span></b></p>

<p class=MsoNormal style='text-indent:21.05pt;line-height:150%;text-autospace:
none'><span style='line-height:150%;font-family:华文中宋'>利用NASM编译按照上述要求编写完毕的“字母碰撞”程序，再使用自己制作的lsy_floopy_image_maker软件将其放入软盘的第一个扇区作为引导程序，而后使用VMware
Workstation配置一个虚拟机环境，虚拟机的BIOS会自动寻找含引导文件的磁盘，从而进入自己制作的“字母碰撞”程序，接管裸机的控制权。</span></p>

<p class=MsoNormal style='margin-left:0cm;text-indent:0cm;line-height:150%;
text-autospace:none'><b><span style='line-height:150%;font-family:华文中宋'>四.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></b><b><span
style='line-height:150%;font-family:华文中宋'>实验过程</span></b></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:-21.0pt'><span
style='font-family:华文中宋'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:华文中宋'>首先设计“字母碰撞”程序。主要可以将该程序以下为几个部分：</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
style='font-family:华文中宋'>延迟子程序delay、显示姓名学号的子程序show_name、与字母移动和碰撞有关的子程序fly_word、collision_detection。</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
style='font-family:华文中宋'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
style='font-family:华文中宋'>其中，各部分的具体内容如下所示：</span></p>

<p class=MsoNormal style='margin-left:63.0pt;text-indent:-21.0pt'><span
style='font-family:华文中宋'>a)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:华文中宋'>因为需要让字母保持一个可观察的适当速度直线运动，因而我们需要设计延迟子程序delay。在此，我使用的设计方法为利用循环占用CPU的时钟周期，使其暂时无法执行其他指令，以达到延迟的效果，具体代码如下：</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>delay_time1 </span><span lang=EN-US style='font-family:
Consolas;color:#4EC9B0'>equ</span><span lang=EN-US style='font-family:Consolas;
color:#D4D4D4'> </span><span lang=EN-US style='font-family:Consolas;color:#B5CEA8'>800</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>delay_time2 </span><span lang=EN-US style='font-family:
Consolas;color:#4EC9B0'>equ</span><span lang=EN-US style='font-family:Consolas;
color:#D4D4D4'> </span><span lang=EN-US style='font-family:Consolas;color:#B5CEA8'>65535</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#DCDCAA'>delay:</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>push</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>cx</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>mov</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>cx</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, delay_time1</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>mov</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>ax</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, delay_time2</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#DCDCAA'>&nbsp;&nbsp;&nbsp; delay1:</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>dec</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>ax</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>jnz</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> delay1</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>mov</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>ax</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, delay_time2</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>loop</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> delay1</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>pop</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>cx</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>ret</span></p>

<p class=MsoNormal><span style='font-family:华文中宋'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:63.0pt;text-indent:-21.0pt'><span
style='font-family:华文中宋'>b)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:华文中宋'>因为需要在屏幕某个区域显示你的学号姓名等个人信息，因而我们需要显示姓名学号的子程序show_name。在此，我使用的设计方法直接向显存特定区段写入我需要显示的字符及其特定属性，具体解释如下：</span></p>

<p class=MsoNormal style='margin-left:63.0pt'><span style='font-family:华文中宋'>显存的段地址为B800，其与屏幕上字符的对应关系为：</span></p>

<p class=MsoNormal style='margin-left:63.0pt'><span lang=EN-US
style='font-family:华文中宋'><img id="Picture 4"
src="/assets/source/OS/2020-08-09-OS_lab1.files/image002.png"></span></p>

<p class=MsoNormal style='margin-left:63.0pt'><span style='font-family:华文中宋'>且字符的显示属性为：</span></p>

<p class=MsoNormal style='margin-left:63.0pt'><span lang=EN-US
style='font-family:华文中宋'><img src="/assets/source/OS/2020-08-09-OS_lab1.files/image003.png"></span></p>

<p class=MsoNormal style='margin-left:62.95pt;text-indent:21.0pt'><span
style='font-family:华文中宋'>因而，假定我们将要显示的字符坐标为(x, y)，并把x存于DL中，y存与DH中，则显存地址的偏移量便可表示为(80
* x + y) * 2。于是我们可以用以下的compute_memory_address子程序计算某一坐标对应的偏移量。</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#DCDCAA'>compute_memory_address:</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> &nbsp;</span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; </span><span style='font-family:
宋体;color:#6A9955'>计算显存地址偏移量</span><span style='font-family:Consolas;color:#6A9955'>
</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>mov</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>al</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dl</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; al</span><span style='font-family:
宋体;color:#6A9955'>暂存</span><span lang=EN-US style='font-family:Consolas;
color:#6A9955'>x</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>mov</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dl</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, </span><span lang=EN-US
style='font-family:Consolas;color:#B5CEA8'>80</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; dl</span><span style='font-family:
宋体;color:#6A9955'>暂存</span><span lang=EN-US style='font-family:Consolas;
color:#6A9955'>80</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>mul</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dl</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; ax = 80 * x</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>mov</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dl</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dh</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; dl = dh = y</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>xor</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dh</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dh</span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; dh = 0</span><span
style='font-family:宋体;color:#6A9955'>，即</span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>dx = dl = y</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>add</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>ax</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dx</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; ax = 80 * x + y</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>mov</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dx</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, </span><span lang=EN-US
style='font-family:Consolas;color:#B5CEA8'>2</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>mul</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dx</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; eax = (80 * x + y) * 2</span><span
style='font-family:宋体;color:#6A9955'>，但由于</span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>x &lt;= 24, y &lt;= 79</span><span
style='font-family:宋体;color:#6A9955'>，则乘积小于</span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>3998 &lt; ax = 65535</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>mov</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>si</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>ax</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; si = (80 * x + y) * 2</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>ret</span></p>

<p class=MsoNormal style='margin-left:62.95pt;text-indent:21.0pt'><span
style='font-family:华文中宋'>同时，结合以下子程序，便可完成姓名学号的显示。</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; name_x </span><span lang=EN-US
style='font-family:Consolas;color:#4EC9B0'>equ</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#B5CEA8'>12</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; name_y </span><span lang=EN-US
style='font-family:Consolas;color:#4EC9B0'>equ</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#B5CEA8'>33</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#DCDCAA'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#DCDCAA'>show_name:</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>mov</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dl</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, name_x</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>mov</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dh</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, name_y</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>call</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> compute_memory_address</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>mov</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>cx</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, len</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>mov</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>bx</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, name</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#DCDCAA'>&nbsp;&nbsp;&nbsp; print_name:</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>mov</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>al</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, [</span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>bx</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>]</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>mov</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>ah</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, name_colour</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>mov</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#4EC9B0'>word</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> [</span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>es</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>:</span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>si</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>], </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>ax</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>inc</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>bx</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;</span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>inc</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>si</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>inc</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>si</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>loop</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> print_name</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>ret</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; name </span><span lang=EN-US
style='font-family:Consolas;color:#4EC9B0'>db</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> &quot;</span><span lang=EN-US
style='font-family:Consolas;color:#B5CEA8'>XXXXXXXX</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> lsy&quot;</span></p>

<p class=MsoNormal style='margin-left:62.95pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:华文中宋'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:63.0pt;text-indent:-21.0pt'><span
style='font-family:华文中宋'>c)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:华文中宋'>因为需要让字母碰到屏幕的边后产生反射</span><span
style='font-family:华文中宋'>，</span><span style='font-family:华文中宋'>因而我们需要与字母移动和碰撞有关的子程序</span><span
lang=EN-US style='font-family:华文中宋'>fly_word</span><span style='font-family:
华文中宋'>、</span><span lang=EN-US style='font-family:华文中宋'>collision_detection</span><span
style='font-family:华文中宋'>。对于fly_word而言，原理很简单，便是用x，y两个变量记录当前坐标，然后利用compute_memory_address子程序计算出当前坐标对应的显存偏移量，从而显示字符。而字符的移动通过x，y加上delta_x，delta_y变量来完成，delta_x，delta_y变量的取值只有-1和1两个值，这样便能让字符以45°的方式移动。具体代码如下：</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#DCDCAA'>&nbsp;&nbsp;&nbsp; fly_word:</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>call</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> show</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>call</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> collision_detection</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>mov</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>al</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, [delta_x]</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>mov</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>ah</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, [delta_y]</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>add</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dl</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>al</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>add</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dh</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>ah</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>call</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> delay</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>loop</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> fly_word</span></p>

<p class=MsoNormal style='margin-left:62.95pt;text-indent:21.0pt'><span
style='font-family:华文中宋'>其中</span><span style='font-family:华文中宋'>，<span
lang=EN-US>collision_detection</span></span><span style='font-family:华文中宋'>为碰撞检测子程序</span><span
style='font-family:华文中宋'>，</span><span style='font-family:华文中宋'>若检测字符的坐标到达屏幕边缘</span><span
style='font-family:华文中宋'>，</span><span style='font-family:华文中宋'>便让</span><span
lang=EN-US style='font-family:华文中宋'>delta_x</span><span style='font-family:
华文中宋'>，<span lang=EN-US>delta_y</span></span><span style='font-family:华文中宋'>变量适当取反</span><span
style='font-family:华文中宋'>，</span><span style='font-family:华文中宋'>从而下一次字符移动时会改变方向。当然，我选择了让个人信息显示在中央，于是，我便也让我的字母撞击至我的个人信息时也会反弹，反弹的原理相同，便是若检测字符的坐标到达个人信息的边缘，便让delta_x，delta_y变量适当取反，使下一次字符移动时改变方向。具体代码如下，由于增加了对个人信息位置碰撞的检测和碰撞时的颜色变化，代码变得十分复杂：</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#DCDCAA'>collision_detection:</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; </span><span style='font-family:
宋体;color:#6A9955'>撞到边缘反弹，撞到名字也反弹</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; if(y == 0 || y == 79 || (y ==
name_y - 1 || y == name_y + len) &amp;&amp; x == name_x)</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>cmp</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dh</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, screen_left </span><span
lang=EN-US style='font-family:Consolas;color:#6A9955'>; if(y == 0)</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>jz</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> reverse_y</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>cmp</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dh</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, screen_right </span><span
lang=EN-US style='font-family:Consolas;color:#6A9955'>; if(y == 79)</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>jz</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> reverse_y</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>cmp</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dh</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, name_y - </span><span lang=EN-US
style='font-family:Consolas;color:#B5CEA8'>1</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; if(y == name_y - 1)</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>jz</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> x_in_range</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>cmp</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dh</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, name_y + len </span><span
lang=EN-US style='font-family:Consolas;color:#6A9955'>; if(y == name_y + len)</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp; &nbsp;&nbsp;</span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>jnz</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> else1</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#DCDCAA'>&nbsp;&nbsp;&nbsp; x_in_range:</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>cmp</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dl</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, name_x </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; if(x == name_x)</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>jnz</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> else1</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#DCDCAA'>&nbsp;&nbsp;&nbsp; reverse_y:</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>mov</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>al</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, [delta_y] </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; al = delta_y</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>neg</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>al</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; delta_y = -delata_y</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>mov</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> [delta_y], </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>al</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>inc</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>di</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; </span><span style='font-family:
宋体;color:#6A9955'>变色</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>and</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>di</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, </span><span lang=EN-US
style='font-family:Consolas;color:#B5CEA8'>11b</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; </span><span style='font-family:
宋体;color:#6A9955'>取低两位计数，即</span><span lang=EN-US style='font-family:Consolas;
color:#6A9955'>mod 4</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#6A9955'>;ret </span><span
style='font-family:宋体;color:#6A9955'>不能</span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>retern</span><span style='font-family:
宋体;color:#6A9955'>，防止恰好碰到四个角需要二次反向</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#DCDCAA'>&nbsp;&nbsp;&nbsp; else1:</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; if(x == 0 || x == 24 || (x ==
name_x - 1 || x == name_x + 1) &amp;&amp; y &gt;= name_y - 1 &amp;&amp; y &lt;=
name_y + len)</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>cmp</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dl</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, screen_up </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; if(x == 0)</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>jz</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> reverse_x</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>cmp</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dl</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, screen_down </span><span
lang=EN-US style='font-family:Consolas;color:#6A9955'>; if(x == 24)</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>jz</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> reverse_x</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>cmp</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dl</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, name_x - </span><span lang=EN-US
style='font-family:Consolas;color:#B5CEA8'>1</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; if(x == name_x - 1)</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>jz</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> y_in_range</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>cmp</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dl</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, name_x + </span><span lang=EN-US
style='font-family:Consolas;color:#B5CEA8'>1</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; if(x == name_x + 1)</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>jnz</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> else2</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#DCDCAA'>&nbsp;&nbsp;&nbsp; y_in_range:</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>cmp</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dh</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, name_y - </span><span lang=EN-US
style='font-family:Consolas;color:#B5CEA8'>1</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; if(y &gt;= name_y - 1)</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>jl</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> else2</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>cmp</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>dh</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, name_y + len </span><span
lang=EN-US style='font-family:Consolas;color:#6A9955'>; if(y &lt;= name_y +
len)</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>jg</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> else2</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#DCDCAA'>&nbsp;&nbsp;&nbsp; reverse_x:</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>mov</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>al</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, [delta_x] </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; al = delta_x</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>neg</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>al</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; delta_x = -delata_x</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>mov</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> [delta_x], </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>al</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>inc</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>di</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; </span><span style='font-family:
宋体;color:#6A9955'>变色</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>and</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>di</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, </span><span lang=EN-US
style='font-family:Consolas;color:#B5CEA8'>11b</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>; </span><span style='font-family:
宋体;color:#6A9955'>取低两位计数，即</span><span lang=EN-US style='font-family:Consolas;
color:#6A9955'>mod 4</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>ret</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#DCDCAA'>&nbsp;&nbsp;&nbsp; else2:</span></p>

<p class=MsoNormal align=left style='margin-left:62.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>ret</span></p>

<p class=MsoNormal style='margin-left:62.95pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:华文中宋'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:62.95pt;text-indent:21.0pt'><span
style='font-family:华文中宋'>“</span><span style='font-family:华文中宋'>字母碰撞</span><span
style='font-family:华文中宋'>”</span><span style='font-family:华文中宋'>程序源代码的主要部分便如上文所示</span><span
style='font-family:华文中宋'>，</span><span style='font-family:华文中宋'>完整的汇编语言源文件见</span><span
style='font-family:华文中宋'>“</span><span style='font-family:华文中宋'>源代码与编译结果</span><span
lang=EN-US style='font-family:华文中宋'>\letter_impact.asm</span><span
style='font-family:华文中宋'>”</span><span style='font-family:华文中宋'>。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:华文中宋'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:42.0pt'><span lang=EN-US
style='font-family:华文中宋'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:-21.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='line-height:150%;font-family:华文中宋'>利用NASM编译按照上述要求编写完毕的“字母碰撞”程序。</span></p>

<p class=MsoNormal style='margin-left:41.95pt;text-indent:21.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>如下图所示，在控制台执行“nasm
letter_impact.asm -o letter_impact”，便可将上述“letter_impact.asm”源代码编译成“letter_impact”机器码。</span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%;
text-autospace:none'><span lang=EN-US><img width=505 height=106 id="图片 1"
src="/assets/source/OS/2020-08-09-OS_lab1.files/image004.png"></span></p>

<p class=MsoNormal style='margin-left:41.95pt;text-indent:21.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>编译后的文件见“源代码与编译结果\letter_impact”。</span></p>

<p class=MsoNormal style='line-height:150%;text-autospace:none'><span
style='line-height:150%;font-family:华文中宋'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:-21.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='line-height:150%;font-family:华文中宋'>使用自己制作的lsy_floopy_image_maker软件将其放入软盘的第一个扇区作为引导程序。</span></p>

<p class=MsoNormal style='margin-left:41.95pt;text-indent:21.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>由于3.5英寸软盘的一个扇区大小为512字节，因此，其实这便是要求我们把编译的“letter_impact”作为一个大小为1.44MB的二进制文件的前512字节。由于该步骤可能需要多次重复操作以便测试，每次均用WinHex手动复制粘贴二进制代码比较麻烦，且WinHex是一款收费软件，为减少版权纠纷（虽然后面用的Vmware
Workstation还是涉及了版权纠纷，但能减少一些是一些吧），我们通过C++自己写一款lsy_floopy_image_maker软件来完成该工作。核心代码如下：</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#569CD6'>bool</span><span lang=EN-US style='font-family:Consolas;
color:#D4D4D4'> </span><span lang=EN-US style='font-family:Consolas;color:#DCDCAA'>make_com</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'>(</span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>const</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> string &amp;src_path, </span><span
lang=EN-US style='font-family:Consolas;color:#569CD6'>const</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> string &amp;dst_path)</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>{</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; ifstream </span><span lang=EN-US
style='font-family:Consolas;color:#9CDCFE'>fin</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>(src_path, ios::binary); </span><span
lang=EN-US style='font-family:Consolas;color:#6A9955'>//</span><span
style='font-family:宋体;color:#6A9955'>以二进制方式打开文件</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#C586C0'>if</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>(!fin.</span><span lang=EN-US
style='font-family:Consolas;color:#DCDCAA'>is_open</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>())</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;{</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout
&lt;&lt; </span><span lang=EN-US style='font-family:Consolas;color:#CE9178'>&quot;com</span><span
style='font-family:宋体;color:#CE9178'>文件不存在，请重新输入文件地址！</span><span lang=EN-US
style='font-family:Consolas;color:#CE9178'>&quot;</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> &lt;&lt; endl &lt;&lt; endl;</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
lang=EN-US style='font-family:Consolas;color:#C586C0'>return</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>false</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>;</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp;&nbsp;}</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; fin.</span><span lang=EN-US
style='font-family:Consolas;color:#DCDCAA'>seekg</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>(</span><span lang=EN-US
style='font-family:Consolas;color:#B5CEA8'>0</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, ios::end);&nbsp;</span><span
lang=EN-US style='font-family:Consolas;color:#6A9955'>//</span><span
style='font-family:宋体;color:#6A9955'>设置文件指针到文件流的尾部</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>int</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> file_size = fin.</span><span
lang=EN-US style='font-family:Consolas;color:#DCDCAA'>tellg</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'>();&nbsp;&nbsp;&nbsp;&nbsp;</span><span
lang=EN-US style='font-family:Consolas;color:#6A9955'>//</span><span
style='font-family:宋体;color:#6A9955'>读取文件指针的位置，单位为</span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>“</span><span style='font-family:
宋体;color:#6A9955'>字节</span><span lang=EN-US style='font-family:Consolas;
color:#6A9955'>”</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; fin.</span><span lang=EN-US
style='font-family:Consolas;color:#DCDCAA'>seekg</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>(</span><span lang=EN-US
style='font-family:Consolas;color:#B5CEA8'>0</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, ios::beg); </span><span
lang=EN-US style='font-family:Consolas;color:#6A9955'>//</span><span
style='font-family:宋体;color:#6A9955'>回到文件首</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>char</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> *com_info = </span><span
lang=EN-US style='font-family:Consolas;color:#C586C0'>new</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>char</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>[file_size];</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; fin.</span><span lang=EN-US
style='font-family:Consolas;color:#DCDCAA'>read</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>(com_info, file_size);</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; fin.</span><span lang=EN-US
style='font-family:Consolas;color:#DCDCAA'>close</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>();</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; ofstream </span><span lang=EN-US
style='font-family:Consolas;color:#9CDCFE'>fout</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>(dst_path, ios::binary | ios::app); </span><span
lang=EN-US style='font-family:Consolas;color:#6A9955'>//</span><span
style='font-family:宋体;color:#6A9955'>写到文件尾</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; fout.</span><span lang=EN-US
style='font-family:Consolas;color:#DCDCAA'>write</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>(com_info, file_size);</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#C586C0'>delete[]</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> com_info;</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>int</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> padding_bit_len = </span><span
lang=EN-US style='font-family:Consolas;color:#B5CEA8'>512</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> - file_size; </span><span
lang=EN-US style='font-family:Consolas;color:#6A9955'>//</span><span
style='font-family:宋体;color:#6A9955'>填充位长度，填充满一个扇区</span><span lang=EN-US
style='font-family:Consolas;color:#6A9955'>512B</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>char</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> *padding_bit = </span><span
lang=EN-US style='font-family:Consolas;color:#C586C0'>new</span><span
lang=EN-US style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>char</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>[padding_bit_len]; </span><span
lang=EN-US style='font-family:Consolas;color:#6A9955'>//</span><span
style='font-family:宋体;color:#6A9955'>填充位</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#DCDCAA'>memset</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>(padding_bit, </span><span
lang=EN-US style='font-family:Consolas;color:#B5CEA8'>0</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>, padding_bit_len);</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; fout.</span><span lang=EN-US
style='font-family:Consolas;color:#DCDCAA'>write</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>(padding_bit, padding_bit_len);</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; fout.</span><span lang=EN-US
style='font-family:Consolas;color:#DCDCAA'>close</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>();</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#C586C0'>delete[]</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> padding_bit;</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:Consolas;color:#C586C0'>return</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'> </span><span lang=EN-US
style='font-family:Consolas;color:#569CD6'>true</span><span lang=EN-US
style='font-family:Consolas;color:#D4D4D4'>;</span></p>

<p class=MsoNormal align=left style='margin-left:41.95pt;text-align:left;
line-height:14.25pt;background:#1E1E1E'><span lang=EN-US style='font-family:
Consolas;color:#D4D4D4'>}</span></p>

<p class=MsoNormal style='margin-left:41.95pt;text-indent:21.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>完整代码见</span><span
style='line-height:150%;font-family:华文中宋'>“</span><span style='line-height:
150%;font-family:华文中宋'>源代码与编译结果</span><span lang=EN-US style='line-height:150%;
font-family:华文中宋'>\lsy_floopy_image_maker.cpp</span><span style='line-height:
150%;font-family:华文中宋'>”，</span><span style='line-height:150%;font-family:华文中宋'>利用</span><span
lang=EN-US style='line-height:150%;font-family:华文中宋'>G++</span><span
style='line-height:150%;font-family:华文中宋'>编译后的文件见</span><span style='line-height:
150%;font-family:华文中宋'>“<span lang=EN-US>lsy_floopy_image_maker.exe</span>”</span><span
style='line-height:150%;font-family:华文中宋'>。</span></p>

<p class=MsoNormal style='margin-left:41.95pt;text-indent:21.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>将</span><span
style='line-height:150%;font-family:华文中宋'>“<span lang=EN-US>letter_impact</span>”</span><span
style='line-height:150%;font-family:华文中宋'>与</span><span style='line-height:
150%;font-family:华文中宋'>“<span lang=EN-US>lsy_floopy_image_maker.exe</span>”</span><span
style='line-height:150%;font-family:华文中宋'>置于同一目录</span><span style='line-height:
150%;font-family:华文中宋'>，</span><span style='line-height:150%;font-family:华文中宋'>执行</span><span
style='line-height:150%;font-family:华文中宋'>“<span lang=EN-US>lsy_floopy_image_maker.exe</span>”，</span><span
style='line-height:150%;font-family:华文中宋'>屏幕将会如下显示</span><span
style='line-height:150%;font-family:华文中宋'>：</span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%;
text-autospace:none'><span lang=EN-US><img width=351 height=105
src="/assets/source/OS/2020-08-09-OS_lab1.files/image005.png"></span></p>

<p class=MsoNormal style='margin-left:41.95pt;text-indent:21.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>且该目录下会出现大小为</span><span
lang=EN-US style='line-height:150%;font-family:华文中宋'>1,474,560 </span><span
style='line-height:150%;font-family:华文中宋'>字节的</span><span style='line-height:
150%;font-family:华文中宋'>“<span lang=EN-US>letter_impact.boot</span>”</span><span
style='line-height:150%;font-family:华文中宋'>文件</span><span style='line-height:
150%;font-family:华文中宋'>，</span><span style='line-height:150%;font-family:华文中宋'>这代表我们的软盘映像制作成功了。</span></p>

<p class=MsoNormal style='line-height:150%;text-autospace:none'><span
lang=EN-US style='line-height:150%;font-family:华文中宋'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:-21.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='line-height:150%;font-family:华文中宋'>使用VMware Workstation配置一个虚拟机环境，虚拟机的BIOS会自动寻找含引导文件的磁盘，从而进入自己制作的“字母碰撞”程序，接管裸机的控制权。</span></p>

<p class=MsoNormal style='margin-left:41.95pt;text-indent:21.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>如下图，我们配置一个内存为4MB，处理器为1个，软盘映像为我们刚刚制作的“letter_impact.boot”文件的虚拟机。</span></p>

<p class=MsoNormal style='margin-left:42.0pt;line-height:150%;text-autospace:
none'><span lang=EN-US><img src="/assets/source/OS/2020-08-09-OS_lab1.files/image006.png"></span></p>

<p class=MsoNormal style='margin-left:41.95pt;text-indent:21.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>配置完毕后，开启虚拟机，屏幕如下显示：</span></p>

<p class=MsoNormal style='margin-left:42.0pt;line-height:150%;text-autospace:
none'><span lang=EN-US><img src="/assets/source/OS/2020-08-09-OS_lab1.files/image007.png"></span></p>

<p class=MsoNormal style='margin-left:41.95pt;text-indent:21.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>虚拟机进入了我们的“字母碰撞”程序，这代表我们接管了裸机的控制权。至此，实验圆满结束！</span></p>

<p class=MsoNormal style='line-height:150%;text-autospace:none'><b><span
style='line-height:150%;font-family:华文中宋'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-left:0cm;text-indent:0cm;line-height:150%;
text-autospace:none'><b><span style='line-height:150%;font-family:华文中宋'>五.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></b><b><span
style='line-height:150%;font-family:华文中宋'>实验心得</span></b></p>

<p class=MsoNormal style='margin-left:42.05pt;text-indent:-21.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='line-height:150%;font-family:华文中宋'>一个学期没有用汇编了，其实确乎有些生疏，但写着写着手感又回来了，说明这个实验还是很有意义的。不过有时候依然会卡在某些地方，想不到某个逻辑如何直接用汇编语言写出，这时候，先用高级语言写出程序，再将相应的高级语言翻译成汇编语言能大大提高编码效率。</span></p>

<p class=MsoNormal style='margin-left:42.05pt;text-indent:-21.0pt;line-height:
150%;text-autospace:none'><span style='line-height:150%;font-family:华文中宋'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='line-height:150%;font-family:华文中宋'>当然，不仅仅如此，在某些逻辑较为复杂的地方，如本实验中判断碰撞的子程序，其中的if有着非常复杂的条件，以下面这个代码为例：if(y
== 0 || y == 79 || (y == name_y - 1 || y == name_y + len) &amp;&amp; x ==
name_x)，如果我自己直接把它翻译为汇编语言的代码，可能会非常冗杂与重复，效率低下。但是，我利用C++编译上述条件判断语句后，再利用反汇编工具查看相应的代码，竟惊觉编译器是如此的智能，编译出的代码竟是如此的优雅。用这样的方法进行复杂逻辑的汇编语言构造，不仅能提高自己写汇编代码的生产力，更能让自己从长时间优化、众人合力编制的编译器中学习如何优化代码，这是非常有意义的一件事情。</span></p>

<p class=MsoNormal style='line-height:150%;text-autospace:none'><span
style='line-height:150%;font-family:华文中宋'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:0cm;text-indent:0cm;line-height:150%;
text-autospace:none'><b><span style='line-height:150%;font-family:华文中宋'>六.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></b><b><span
style='line-height:150%;font-family:华文中宋'>参考文献</span></b></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:"Georgia",serif'>[1]<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:华文中宋'>周杰英，张萍，郭雪梅，黄方军．微机原理、汇编语言与接口技术，北京：人民邮电出版社，<span
lang=EN-US>2011.</span></span></p>

</div>

</body>

</html>